<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mugs.config.mapper.subjectMapper">

	<sql id="select-subject">
		SELECT subject_id,
		subject_name,
		subject_time,
		subject_type,
		subject_credit,
		subject_capacity,
		subject_request,
		subject_grade,
		subject_class,
		subject_close_class,
		subject_semester,
		major_id,
		lecture_id
		FROM subject
	</sql>

	<resultMap type="subject" id="subject-basic-resultmap">
		<id column="SUBJECT_ID" property="subjectId" />
		<result column="SUBJECT_NAME" property="subjectName" />
		<result column="SUBJECT_TIME" property="subjectTime" />
		<result column="SUBJECT_TYPE" property="subjectType" />
		<result column="SUBJECT_CREDIT" property="subjectCredit" />
		<result column="SUBJECT_CAPACITY" property="subjectCapacity" />
		<result column="SUBJECT_REQUEST" property="subjectRequest" />
		<result column="SUBJECT_GRADE" property="subjectGrade" />
		<result column="SUBJECT_CLASS" property="subjectClass" />
		<result column="SUBJECT_CLOSE_CLASS" property="subjectCloseClass" />
		<result column="SUBJECT_SEMESTER" property="subjectSemester" />
		<result column="MAJOR_ID" property="majorId" />
		<result column="LECTURE_ID" property="lectureId" />
		<result column="cnt" property="remainNum" />
	</resultMap>
	
	<!-- insert -->
	<insert id="insertSubject" parameterType="subject">
		INSERT INTO subject
		VALUES(#{subjectId}, #{subjectName}, #{subjectTime},
		#{subjectType},
		#{subjectCredit}, #{subjectCapacity}, #{subjectRequest},
		#{subjectGrade},
		#{subjectClass}, #{subjectCloseClass}, #{subjectSemester},
		#{majorId}, #{lectureId})
	</insert>

	<!-- update -->
	<update id="updateSubjectById" parameterType="subject">
		UPDATE subject
		SET
		subject_name = #{subjectName},
		subject_time = #{subjectTime},
		subject_type = #{subjectType},
		subject_credit = #{subjectCredit},
		subject_capacity = #{subjectCapacity},
		subject_request = #{subjectRequest},
		subject_grade = #{subjectGrade},
		subject_class = #{subjectClass},
		subject_close_class= #{subjectCloseClass},
		subject_semester = #{subjectSemester},
		major_id = #{majorId},
		lecture_id =  #{lectureId}
		WHERE subject_id=#{subjectId}
	</update>

	<!-- delete -->
	<delete id="deleteSubject" parameterType="int">
		DELETE FROM subject WHERE
		subject_id = #{value}
	</delete>

	<!-- select -->
	<select id="selectSubjectList" resultMap="subject-basic-resultmap">
		<include refid="select-subject" />
	</select>

	<select id="selectSubjectById" resultMap="subject-basic-resultmap" parameterType="int">
		<include refid="select-subject" />
		WHERE subject_id= #{value}
	</select>

	<select id="selectSubjectType" resultType="string">
		select distinct subject_type
		from subject
	</select>

</mapper>