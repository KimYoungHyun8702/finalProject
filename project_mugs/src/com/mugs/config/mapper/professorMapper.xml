<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mugs.config.mapper.professorMapper">

	<resultMap id="professor-resultmap" type="professor">
		<id column="pro_id" property="proId" />
		<result column="pro_university" property="proUniversity" />
		<result column="pro_grad_school" property="proGradSchool" />
		<result column="pro_office_phone_num" property="proOfficePhoneNum" />
		<result column="pro_laboratory_phone_num" property="proLaboratoryPhoneNum" />
		<result column="major_id" property="majorId" />
		<result column="office_id" property="proRoomOfficeId" />
		<result column="laboratory_id" property="proRoomLaboratoryId" />
	</resultMap>

	
	<resultMap id="professor-user-resultmap" type="professor">
      <id column="pro_id" property="proId" />
	  <result column="pro_university" property="proUniversity" />
	  <result column="pro_grad_school" property="proGradSchool" />
	  <result column="pro_office_phone_num" property="proOfficePhoneNum" />
	  <result column="pro_laboratory_phone_num" property="proLaboratoryPhoneNum" />
	  <result column="major_id" property="majorId" />
	  <result column="office_id" property="proRoomOfficeId" />
	  <result column="laboratory_id" property="proRoomLaboratoryId" />
      <result column="users_id" property="usersId" />
      <result column="users_password" property="usersPassword" />
      <result column="users_name" property="usersName" />
      <result column="users_eng_name" property="usersEngName" />
      <result column="users_rrn" property="usersRRN" />
      <result column="users_email" property="usersEmail" />
      <result column="users_phone_num" property="usersPhoneNum" />
      <result column="users_cell_num" property="usersCellNum" />
      <result column="users_national" property="usersNational" />
      <result column="users_current_addr" property="usersCurrentAddr" />
      <result column="users_born_addr" property="usersBornAddr" />
      <result column="users_enable" property="usersEnable" />
      <result column="users_photo" property="usersPhoto" />
   </resultMap>
	
	<sql id="select-professor">
	SELECT pro_id, pro_university, pro_grad_school, pro_office_phone_num, pro_laboratory_phone_num, major_id,office_id,laboratory_id  
	FROM professor			
	</sql>
	
	<select id="selectProfessorList" resultMap="professor-resultmap">
		<include refid="select-professor"/>
	</select>

	<select id="selectProfessorById" resultMap="professor-resultmap"
		parameterType="string">
		<include refid="select-professor"/>
		WHERE pro_id = #{value}
	</select>

	<insert id="insertProfessor" parameterType="professor">
		INSERT INTO professor
		VALUES(#{proId},#{proUniversity},#{proGradSchool},#{proOfficePhoneNum})
	</insert>

	<delete id="deleteProfessorById" parameterType="String">
		DELETE FROM professor
		WHERE pro_id = #{value}
	</delete>

	<update id="updateProfessor" parameterType="professor">
		UPDATE professor
		SET
		pro_university = #{proUniversity}, pro_grad_school = #{proGradSchool}, 
		pro_office_phone_num = #{proOfficePhoneNum}
		WHERE pro_id = #{proId}
	</update>
	

	<select id="selectProfessorInfoByJoin" resultMap="professor-user-resultmap">
		SELECT p.pro_id,
		  	   p.pro_university,
		  	   p.pro_grad_school,
		  	   p.pro_office_phone_num,
		  	   p.pro_laboratory_phone_num,
		  	   p.major_id,
		  	   p.office_id,
		  	   p.laboratory_id,
		   	   u.users_id, 
		  	   u.users_password, 
		  	   u.users_name,
		   	   u.users_eng_name,
		   	   u.users_rrn,
		   	   u.users_email,
		   	   u.users_phone_num,
		  	   u.users_cell_num,
		  	   u.users_national,
		  	   u.users_current_addr,
		  	   u.users_born_addr,
		       u.users_enable,
	           u.users_photo
		FROM   professor p, users u
		WHERE  p.pro_id = u.users_id
		AND    p.pro_id = #{value}
	</select>
</mapper>